<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inline Zoom Scroll Debug</title>
  <style>
    html, body {
      margin: 0; padding: 0;
      height: 100%;
      overflow-x: hidden;
      overflow-y: auto;
      background: #262626;
      font-family: sans-serif;
    }
    .scene { width:100%; height:700vh; }
    .text-fixed {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%) scale(0.5);
      opacity: 0;
      font-size: 2rem;
      color: #fff;
      background: rgba(255,0,0,0.2);
      padding: 0.5em 1em;
      z-index: 100;
      white-space: nowrap;
      transition: transform 0.2s, opacity 0.2s;
    }
  </style>
</head>
<body>
  <div class="scene"></div>
  <div class="text-fixed">DEBUG</div>
  <script>
    console.log('Inline debug script loaded');
    const slides = [
      'First line of text','Second line','Third line',
      'Fourth line','Fifth line','Sixth line','Seventh line'
    ];
    const textEl = document.querySelector('.text-fixed');

    function onScroll() {
      const y = window.scrollY;
      const h = window.innerHeight;
      const idx = Math.floor(y / h);
      const prog = (y % h) / h;
      console.log({idx, prog});

      if (idx >= 0 && idx < slides.length) {
        textEl.textContent = slides[idx];
        const scale = 0.5 + 0.7 * prog;
        let opacity = 1;
        if (prog < 0.2) opacity = prog / 0.2;
        else if (prog > 0.8) opacity = (1 - prog) / 0.2;
        textEl.style.transform = `translate(-50%,-50%) scale(${scale.toFixed(2)})`;
        textEl.style.opacity   = opacity.toFixed(2);
      } else {
        textEl.style.opacity = 0;
      }
    }

    window.addEventListener('scroll', onScroll);
    window.dispatchEvent(new Event('scroll'));
  </script>
</body>
</html>
